function FoundationHelper(){}var getSuggestions,hightlightHash;$.fn.textAreaSuggestion=function(){var n=$('<ul class="suggestion-box"><\/ul>').appendTo("body").hide();return this.each(function(){var t=$(this);t.keydown(function(t){var i,r,u;t.key!="Shift"&&t.key!="Ctrl"&&(i=$(this),r=i.data("query")==undefined?"":i.data("query"),i.data("continue")==!0&&(/^[a-z0-9]{1}$/i.test(t.key)||t.key=="#")?(t.preventDefault(),i.data("query",r+t.key),getSuggestions(i,n,i.data("query")),i.data("continue",!0)):t.key=="#"?(getSuggestions(i,n),i.data("continue",!0)):i.data("continue")&&t.key=="Backspace"&&i.data("query").length>0?(t.preventDefault(),i.data("query",r.substring(0,r.length-1)),getSuggestions(i,n,i.data("query")),i.data("continue",!0)):i.data("continue")&&(t.key=="Tab"||t.key=="Enter")?(t.preventDefault(),u=n.find("li:not(.query)").first().data("link"),i.insert(u),n.hide(),i.focus(),i.data("continue",!1),i.data("query","")):(n.hide(),i.data("continue",!1),i.data("query","")))})})};getSuggestions=function(n,t,i){i==undefined&&(i="");var u=n.data("suggestions-project"),r=getCaretCoordinates(n[0],n[0].selectionEnd),f=r.top+n.offset().top,e=r.left+n.offset().left;$.ajax({url:"/issue/suggestions?projectId="+u+"&query="+i,success:function(r){var h,s,u,o;t.show().html("").css("top",f+"px").css("left",e+"px");h=$('<li class="query">query: '+i+"<\/li>").appendTo(t);for(s in r)u=r[s],o=$('<li class="'+u.extraValue+'">'+u.value+"<\/li>"),o.data("link",u.data),o.click(function(){n.insert($(this).data("link")+" ");t.hide();n.focus()}),t.append(o)}})};hightlightHash=function(){if(window.location.hash)$(window.location.hash).addClass("highlight").on("animationend",function(){$(this).removeClass("highlight")})};window.onhashchange=hightlightHash;$.fn.slugify=function(){return this.each(function(){$(this).change(function(){var n=$($(this).data("slugify"));$.ajax({method:"POST",data:{text:$(this).val()},url:"/slug/index",success:function(t){n.val(t)}})}).change()})};$.fn.insert=function(n){return this.each(function(){var t=$(this);t[0].nodeName==="TEXTAREA"&&t.val(t.val().substr(0,t.prop("selectionStart"))+n+t.val().substr(t.prop("selectionEnd")))})};$.fn.commafy=function(){return this.replace(".",",")};$.fn.dotify=function(){return this.replace(",",".")};$.fn.currency=function(){return parseFloat(this).toFixed(2).commafy()};$.fn.error=function(n){return this.each(function(){$(this).siblings("small.error").remove();$(this).after('<small class="error">'+n+"<\/small>").parent().addClass("error")})};$.fn.cookieRemember=function(){return this.each(function(){var n=$(this).data("remember");$.cookie(n)&&self.queryString.query==undefined&&$(this).val($.cookie(n)).parents("form").submit();$.cookie(n,$(this).val())}).change(function(){var n=$(this).data("remember");$.cookie(n,$(this).val())})};$.fn.ctrlS=function(){return this.keydown(function(n){return(n.which==83&&n.ctrlKey)?($("form").submit(),n.preventDefault(),!1):!0})};$.fn.tableRowClickable=function(){return this.each(function(){$(this).find("tr").click(function(){var n=$(this).find("a").first().attr("href");n&&(window.location=n)})})};$.fn.confirm=function(){return this.each(function(){$(this).click(function(){var n=$(this).data("confirm");return confirm(n)})})};$.fn.markdownify=function(){return marked.setOptions({breaks:!0}),this.each(function(){$(this).html(marked($(this).html()))})};for(var queryString=[],match,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(n){return decodeURIComponent(n.replace(pl," "))},query=window.location.search.substring(1);match=search.exec(query);)queryString[decode(match[1])]=decode(match[2]);$.ajaxUploadSettings.name="uploads";$.fn.upload=function(){return this.each(function(){var n=$(this),t=$('<div class="progress">').append($('<span class="meter">')).insertAfter(this).hide(),r,i;$.browser.msie||n.after($('<small class="info">Je kunt ook afbeeldingen (jpg, png, gif) en bestanden (doc, docx, xls, xlsx, pdf, txt) uploaden door ze op het textveld te slepen.<\/small>'));r=$('<a href="#" class="button no-margin tiny">Upload afbeelding/bestand<\/a>').insertBefore(this);i={url:"/upload/file",beforeSend:function(){t.show()},onprogress:function(n){if(n.lengthComputable){console.log("Progress "+n.loaded+" of "+n.total);var i=n.loaded/n.total*100;t.find(".meter").css("width",i+"%")}},error:function(){console.log("error");n.error("Bestand(en) uploaden niet gelukt")},success:function(i){var u,r;i=$.parseJSON(i);for(u in i.Uploads)n.insert(i.Uploads[u]);for(r in i.Errors)console.log("Error: "+r+" - "+i.Errors[r]),n.error(r+": "+i.Errors[r]);t.hide()}};$(this).ajaxUploadDrop(i);r.ajaxUploadPrompt(i)})};$.fn.uploadList=function(){return this.each(function(){var n=$(this),u=$($(this).data("template-container")),f=$($(this).data("template")),e=$(this).data("url"),t=$('<div class="progress">').append($('<span class="meter">')).insertAfter(this).hide(),r,i;$.browser.msie||n.after($('<small class="info">Je kunt ook afbeeldingen (jpg, png, gif) en bestanden (doc, docx, xls, xlsx, pdf, txt) uploaden door ze op de tabel te slepen.<\/small>'));r=$('<a href="#" class="button no-margin tiny">Upload document<\/a>').insertBefore(this);i={url:e,beforeSend:function(){t.show()},onprogress:function(n){if(n.lengthComputable){console.log("Progress "+n.loaded+" of "+n.total);var i=n.loaded/n.total*100;t.find(".meter").css("width",i+"%")}},error:function(){console.log("error");n.error("Bestand(en) uploaden niet gelukt")},success:function(i){var s,e,r,o;i=$.parseJSON(i);for(s in i.Uploads)e=i.Uploads[s],r=f.html(),r=r.replace(/{{id}}/g,e.Id),r=r.replace(/{{name}}/g,e.Name),r=r.replace(/{{path}}/g,e.Path),r=r.replace(/{{date}}/g,e.DateString),r=r.replace(/{{uploader}}/g,e.UserFullName),u.append(r);for(o in i.Errors)console.log("Error: "+o+" - "+i.Errors[o]),n.error(o+": "+i.Errors[o]);t.hide()}};$(this).ajaxUploadDrop(i);r.ajaxUploadPrompt(i)})};FoundationHelper.prototype={aliases:"small medium large".split(/\s/g),events:"load resize orientationchange",getCurrentSizeClass:function(){var i=this,n,t;return n=[],t=[],$.each(i.aliases,function(i,r){window.matchMedia(Foundation.media_queries[r]).matches?n.push(r):t.push(r)}),n.pop()},oldSizeClass:undefined,registerSizeClassChangeListener:function(n){var t=this;t.onSizeClassChange=n;$(window).on(t.events,function(){var n=t.getCurrentSizeClass();if(n!=t.oldSizeClass&&t.oldSizeClass!=undefined)t.onSizeClassChange(n);t.oldSizeClass=t.getCurrentSizeClass()})},registerSizeClassKnownListener:function(n){var t=this;t.onSizeClassKnown=n;$(window).on(t.events,function(){var n=t.getCurrentSizeClass();if(!t.sizeClassKnown)t.onSizeClassKnown(n);t.sizeClassKnown=!0})},sizeClassKnown:!1,onSizeClassKnown:undefined,onSizeclassChange:undefined};$.fn.nestedTable=function(n){var t=jQuery.extend({deleteText:"Verwijder",afterAdd:function(){}},n),i=function(n){n.preventDefault();$("#addContactId")&&$("#addContactId").length>0&&$("#addContactId").append('<option value="'+$(this).parents("tr").find('input[name$=".Id"]').val()+'">'+$(this).parents("tr").find('input[name$=".FullName"]').val()+"<\/option>");$(this).parents("tr").remove()};return this.each(function(){var n=$(this),e=$("<th>"+t.deleteText+"<\/th>"),r,f,u;n.find("thead tr").append(e);r=$('<a href="#" class="button tiny no-margin alert">Verwijder<\/a>');r.click(i);f=$("<td><\/td>").append(r);n.find("tbody tr").append(f);u=$('<a href="#" class="button small">Nieuw<\/a>');u.click(function(r){r.preventDefault();var f=n.find("tbody tr:last-child input:first-child"),e=parseInt(f.length==0?0:f.prop("name").match(/\d+/)[0])+1,o=n.find("tbody tr:first-child"),u=o.clone().removeClass("hide");u.find(":input").each(function(){var n=$(this),t=n.prop("name"),i=t.replace(/\d+/g,e);n.attr("name",i)});u.find("[type=text]").val("");u.find("[data-nested-remove]").remove();u.find("[type=checkbox]").removeProp("checked");u.find(".button.alert").click(i);n.find("tbody").append(u);t.afterAdd(u)});n.after(u)})};